<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <!-- <link href="https://fonts.googleapis.com/css?family=Roboto|Inconsolata|Work+Sans|Droid+Serif" rel="stylesheet"> -->
    <style>@font-face{font-family:'DroidSerif';font-style:normal;font-weight:400;src:local('DroidSerifRegular'),local('DroidSerif-Regular'),url(https://fonts.gstatic.com/s/droidserif/v8/tDbI2oqRg1oM3QBjjcaDkOr9rAA.ttf)format('truetype');}@font-face{font-family:'Inconsolata';font-style:normal;font-weight:400;src:local('InconsolataRegular'),local('Inconsolata-Regular'),url(https://fonts.gstatic.com/s/inconsolata/v16/QldKNThLqRwH-OJ1UHjlKGlZ5q0.ttf)format('truetype');}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;src:local('Roboto'),local('Roboto-Regular'),url(https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxP.ttf)format('truetype');}@font-face{font-family:'WorkSans';font-style:normal;font-weight:400;src:local('WorkSans'),local('WorkSans-Regular'),url(https://fonts.gstatic.com/s/worksans/v3/QGYsz_wNahGAdqQ43Rh_fKDs.ttf)format('truetype');}</style>
    <!-- <link href="/css/text.css" rel="stylesheet" type="text/css"> -->
    <style>#header h1 { font-size: 120%; display: inline-block; } .sourceCode { overflow-x: scroll; } code, pre { color: #000; background-color: #fff; font-weight: normal; font-family: "Menlo", "Consolas", "Inconsolata", "Anonymous", "Monaco", monospace; font-size: 0.9em; line-height: 1.2em; } p code, li>code { border: 1px solid #DDDDDD; padding: 2px; font-size: 0.8em; } #header h1 a, h2.post-title a, h2.static-title a { color: #000; } ul, ol { margin-left: 2em; } div.highlight, pre { margin-bottom: 1em; } code.has-jax { border: none; background-color: #fff; } .date { font-style: italic; color: #4e4e4e; } body { font: 300 1.1em/1.6em Georgia, "Droid Serif", "Open Sans", "DejaVu Serif", serif; } blockquote { padding-top: 0; } .panel { padding-left: 2em; padding-right: 2em; font-size: 120%; } .panel p { font-weight: bold; font-style: italic; line-height: 1.1em; } footer { text-align: center; } footer span { font-style: italic; } footer { padding-top: 2em; } /* Generated by pandoc. */ table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode, table.sourceCode pre { margin: 0; padding: 0; border: 0; vertical-align: baseline; border: none; } td.lineNumbers { border-right: 1px solid #AAAAAA; text-align: right; color: #AAAAAA; padding-right: 5px; padding-left: 5px; } td.sourceCode { padding-left: 5px; } .sourceCode span.kw { color: #007020; font-weight: bold; } .sourceCode span.dt { color: #902000; } .sourceCode span.dv { color: #40a070; } .sourceCode span.bn { color: #40a070; } .sourceCode span.fl { color: #40a070; } .sourceCode span.ch { color: #4070a0; } .sourceCode span.st { color: #4070a0; } .sourceCode span.co { color: #60a0b0; font-style: italic; } .sourceCode span.ot { color: #007020; } .sourceCode span.al { color: red; font-weight: bold; } .sourceCode span.fu { color: #06287e; } .sourceCode span.re { } .sourceCode span.er { color: red; font-weight: bold; }</style>
    <!-- <link href="/css/aduffy.css" rel="stylesheet" type="text/css"> -->
    <style>/* Modify selection color on WebKit/Mozilla. */ ::-moz-selection { background: antiquewhite; } ::selection { background: antiquewhite; } body { padding-bottom: 30px; }</style>
    
    <title>tmux Magic: synchronize-panes • aduffy.io</title>
    
  </head>
  <body>
    <div class="row">
        <div id="header" class="large-10 large-offset-1 columns">
            <h1><a href="../">aduffy.io</a>://</h1>
            <a href="../">posts</a>
            /
            <a href="../about.html">about</a>
            /
            <a href="../projects.html">projects</a>
            /
            <a href="../photos.html">photos</a>
            &mdash;
            <span><a class="underline" href="https://github.com/a10y/a10y.github.io/commit/5fb2127
">5fb2127
</a></span>
        </div>
    </div>
    <div class="row">
      <div class="large-10 large-centered columns">
        
        <h1>tmux Magic: synchronize-panes</h1>
        
        <p class="date">16 Feb 2016</p>

<p>It’s been a little bit since I posted here, just wanted to share something that I’ve been using the last few days that I’ve found to help me quite a lot when running multiple SSH sessions to the same machine, and I want to avoid retyping the same commands in each one. This comes up a lot when I’m working on <a href="https://worksheets.codalab.org">CodaLab</a>, and I need to take some code that I’ve developed on my own laptop (Macbook Pro) and test it out on my Linux box.</p>
<p>Oftentimes, I’ll need to start several services at once on the box, and watch the output or feed commands into some of them, but a lot of what I do requires running a set of “boilerplate” commands (<code>cd</code> to the directory, <code>export</code> some environment varaibles) that are the same for each session. It gets repetitive having to run these same commands 4 times each, and it can be easy to forget what I’ve already done. I started wondering if there were some way that I can broadcast these commands to all open SSH sessions, and sure enough my trusty tmux had the fix for me, in the form of <code>synchronize-panes</code>.</p>
<p>To start, we’ll be using the fablous <a href="https://tmux.github.io/">tmux</a>, a great terminal multiplexer. If you’ve never used tmux before, you can <a href="https://gist.github.com/MohamedAlaa/2961058">refer to this cheatsheet</a>, but if you already have your own config then use those keybindings.</p>
<h2 id="split-up">Split Up!</h2>
<p>tmux is a terminal multiplexer, which means that it’s meant for viewing several screens of terminals in tandem, which is why I find myself using it quite often when developing and testing on different machines over SSH sessions, as well as just a quick local hack. I’ve become very dependent on tmux for several workflows:</p>
<ul>
<li><strong>Code and Test</strong>, where I have <a href="https://github.com/a10y/nvim-config">my editor</a> open side-by-side with a Python/Haskell/JS REPL. I get a tight feedback loop by having my code and its side effects next to one another, rather than having to tab (or, even worse, switch desktops!) back and forth.</li>
<li><strong>Watching multiple logs</strong>. This is common as well when I’m trying to watch several log files at once, and perhaps I have a fourth pane dedicated to navigating around a system and running various commands.</li>
<li><strong>Multiple SSH sessions</strong>. This is the use case <code>synchronize-buffers</code> really nails, when you need to have multiple terminal sessions open on a remote host over SSH. Oftentimes you’ll also need to perform some sort of session-specific setup (ex. <code>export</code>ing a set of environment variables). We’ll see how <code>synchronize-panes</code> rocks for this use case.</li>
</ul>
<h2 id="soulja-boy-now-synchronize.">Soulja Boy Now Synchronize….</h2>
<p>Okay, now we can finally get into the namesake of this post, <code>synchronize-panes</code>. It’s a tmux command that allows you to setup a single tmux window to replicate keyboard input across all panes. You can imagine that if you need to open up multiple SSH sessions at once, switch them all to the same directory or export a number of variables, then this would be perfect.</p>
<p>You can trigger <code>synchronize-panes</code> via the tmux console by running <code>&lt;prefix&gt;&lt;colon&gt;synchronize-panes&lt;enter&gt;</code>, however I have toggling mapped to <code>&lt;prefix&gt;b</code> (the <strong>b</strong> is for <strong>broadcast</strong>) so that I can run this in a pinch.</p>
<p>You can see the result below. Happy Multiplexing!</p>
<script type="text/javascript" src="https://asciinema.org/a/6gtm7uit560w6781ab7bgz2kh.js" id="asciicast-6gtm7uit560w6781ab7bgz2kh" async></script>


<hr />

<div>
    Like this post? Hate this post? <a href="https://twitter.com/intent/tweet?text=@andreweduffy+https://aduffy.io/posts/2016-02-16-tmux.html+">Give me your feedback!</a>
</div>

      </div>
    </div>

    
  </body>
</html>
